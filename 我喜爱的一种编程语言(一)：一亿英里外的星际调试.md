

title: title
title: 我喜爱的一种编程语言(一)：一亿英里外的星际调试
date: 2006-05-02 17:56:00
categories:
- 技术点滴
tags: 
 
---


给用户编了程序，进行调试是少不了的，毕竟程序员是人，编制的程序不可能在一开始就考虑得面面俱到，如果真是在初始阶段就能把将来会出现的所有情况完全确定了，那么几乎可以断言这个程序没有什么用处，例如"Hello World!"之类。

程序的调试按照最简单的分法可以分为交付前测试与程序实际运行之后的除错与修改。前者好办，无非是用一些简单、抽象的样例来判断一下程序功能是否完善，说白了，就是自己折腾一下自己的程序；后者往往比较复杂一些，有时侯用户自己都不知道需求是什么，所以对拿到手的程序有诸多不满。或者是尽管程序符合要求，但是在实际运行当中，用户发现自己设定的需求本身就需要改动……不论如何，这种后期调试都是比较困难的，尤其是当程序已经运行在服务器上面的时候，如果修改程序，那么必然会影响服务的正常运行。短短几个小时的调试带来的直接和间接经济损失都会令用户觉得无法承受。

我最近才发现了一种一直被我忽略的编程语言具有这样的特性──可以在运行当中进行调试，不仅不影响原有功能的正常运行，更可以使得程序员进行远程调试的时候，感觉跟在自己的机器上调试没有什么区别。

对于制做服务器级程序──诸如web server之类──来说，这真是福音！

可是，真正给我留下深刻印象的是下面这个故事，发生在上个世纪末的“一亿英里外的星际调试”：

NASA在1998年搞了一个Deep Space 1mission。在航天器升空一年半之后，距地球的距离已经达到一亿英里，这时航天器将在一段代码的控制之下，进行为期两天的一系列实验。可是这段代码直到运行起来，地面人员才发现问题。程序员不小心制造的一个细微的bug躲过了森严的发射前检查，直到它在遥远的宇宙空间中真正运行起来的时候，方才初露端倪。这个bug导致了竞争冒险，也就是说有可能造成控制错误！

这下可麻烦了，难道放弃当前的实验，以避免控制错误吗？那代价可比地球上面一个服务器停机维护几个小时大得太多了！

听之任之？也不行，如果控制错误真正发生，后果更加不堪设想！

听起来像个悖论，呵呵。

幸好，这段代码是用我上面提到的这种编程语言编写的。于是，开发小组立刻开始了远程调试。实验还在一亿英里之外按部就班进行，而出现控制错误的风险，就在这进行着的实验序列当中，被地球上的程序员利用“运行时调试”的功能悄无声息地解决掉了……

难怪其中的一个程序员在这次任务的记录中写下如下的话：

% blockquote %
"Debugginga program running on a $100M piece of hardware that is 100 millionmiles away is an interesting experience. Having a read-eval-print looprunning on the spacecraft proved invaluable in finding and fixing theproblem."
% endblockquote %